<link rel="import" href="../polymer/polymer.html">

<dom-module id="spa-link">
  <template>
    <slot></slot>
  </template>

  <script>
    class SparLink extends Polymer.Element {

      static get is() { return 'spar-link' }

      static get properties() {
        return { path: String }
      }
      constructor() {
        super();
        this._navigateTo = this._navigateTo.bind(this);
        
      }
      //consider creating a remove listener when detached from DOM
      ready () {
        
        super.ready();
        // 'tap' event does not trigger, will submit issue
        this.addEventListener('click', this._navigateTo)
        // console.dir(this);
      }
      _navigateTo() {
        window.history.pushState({'_spa_PATH':this.path},'',this.path);
        dispatchEvent(new PopStateEvent('popstate',{state:{'_spa_PATH':this.path}}));
      }
    }
    customElements.define(SparLink.is, SparLink);
  </script>
</dom-module>
